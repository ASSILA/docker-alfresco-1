# generated by 'amc setup' - edit docker-compose.yml.tmpl instead
haveged:
  image: harbur/haveged:1.7c-1
  privileged: true
skydns:
  image: crosbymichael/skydns
  name: skydns
  ports:
    - "172.17.0.1:53:53/udp"
  command: "-nameserver 8.8.8.8:53 -domain docker"
skydock:
  image: crosbymichale/skydock
  name: skydock
  volumes: 
    - /var/run/docker.sock:/docker.sock
  command: "-ttl 30 -environment ns -s /docker.sock -domain docker"
alfresco:
  build: alfresco
  hostname: alfresco
  expose: 
    - "2021"
    - "7070"
    - "8080"
  links: 
    - mysql
    - solr
    - postfix
  ports:
    - "8081:8080"
  volumes: 
    - /data/alfresco/repo:/data
  dns: 172.17.0.1
share:
  build: share
  hostname: share
  expose:
    - 8080
  ports:
    - "8080:8080"
  volumes: 
    - /data/alfresco/share:/data
  links:
    - alfresco
  dns: 172.17.0.1
solr:
  build: solr
  hostname: solr
  volumes:
    - /data/alfresco/solr/data:/data
    - /data/alfresco/solr/content:/content
  dns: 172.17.0.1
mysql:
  hostname: mysql
  image: "mysql:5.6"
  volumes: 
    - /data/alfresco/mysql:/var/lib/mysql
  environment:
    MYSQL_DATABASE: alfresco
    MYSQL_USER: alfresco
    MYSQL_PASSWORD: alfresco
    MYSQL_ROOT_PASSWORD: alfresco
  dns: 172.17.0.1
postfix:
  hostname: postfix
  image: "catatnight/postfix"
  ports:
    - "25:25"
  environment: 
    maildomain: "alfresco.local"
    smtp_user: "mailuser:password"
  dns: 172.17.0.1
